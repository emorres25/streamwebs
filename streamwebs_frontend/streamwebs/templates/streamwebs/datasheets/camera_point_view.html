{% extends 'streamwebs/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load filters %}
{% block body_title %}{% trans 'View a camera point' %}{% endblock %}
{% block content %}

<div class="container">
<!-- CP info -->
<div>
    <h3>{{ site.site_name }}: Camera Point {{ cp.letter }}</h3>
    <p><b>Date established:</b> {{ cp.cp_date|date:"m-d-Y" }}</p>
    <p><b>Location:</b> {{ cp.location }}</p>
    <p><b>Map datum:</b> {{ cp.map_datum }} </p>
    <p><b>Description:</b> {{ cp.description }}</p>
</div>

<!-- CP's PP info, including PPIs -->
<div>
    <h2>Photo points</h2>
    <div class="row">
      <div class="col s12 m7">
    {% for pp in pps %}

        <div class="card">
          <div class="card-image">
            {% for pp_num, img_set in pp_images.items %}
                {% if pp_num == pp.number %}
                    {% for img in img_set %}
                    <img src="{{ img.image.url }}" alt="pp image" />
                    <span class="card-title">{{ img.date|date:"m-d-Y" }}</span>
                    {% endfor %}
                {% endif %}
            {% endfor %}
          </div>
          <div class="card-content">
            <ul>
                <li>Date established: {{ pp.pp_date|date:"m-d-Y" }}</li>
                <li>Compass bearing: {{ pp.compass_bearing }}</li>
                <li>Distance from camera point: {{ pp.distance }}</li>
                <li>Camera height: {{ pp.camera_height }}</li>
                <li>Notes: {{ pp.notes }}</li>
            </ul>
          </div>
          <div class="card-action">
            <h5>
              <a href="{% url 'streamwebs:photo_point' site.site_slug cp.id pp.id %}">
                 Photo point {{ pp.number }}
              </a>
            </h5>
          </div>
        </div>

    {% endfor %}
    </div>
  </div>
</div>
</div>
{% endblock %}
