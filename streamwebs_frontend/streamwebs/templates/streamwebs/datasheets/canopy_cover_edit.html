{% extends 'streamwebs/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load filters %}
{% block title %}{% trans "Add Canopy Cover Survey" %}{% endblock %}
{% block body_title %}{% trans "Add Canopy Cover Survey" %}{% endblock %}
{% block content %}

{% if user.is_authenticated %}
    {% if added %}
        <strong> trans "You have successfully submitted your Canopy Cover Survey." </strong>
    {% endif %}

    <form id='canopy_cover_form' method='post'>
        {% csrf_token %}
        <table> <!-- main cc info table -->
            <tr>
                <td>
                    {{ canopy_cover_form.site.label }}
                    {% if canopy_cover_form.site.errors %}
                        <br>{{ canopy_cover_form.site.errors|striptags }}
                    {% endif %}
                    <br>{{ canopy_form.site }}</br>
                </td>
                <td></td>
            </tr>

            <tr>{{ canopy_cover_form.non_field_errors }}</tr>
            <tr>
                <th align='left'>{{ canopy_cover_form.school.label }}</th>
                <td>{{ canopy_cover_form.school }}</td>
                <td>{{ canopy_cover_form.school.errors }}</td>
            </tr>
            <tr>
                <th align='left'>{{ canopy_cover_form.date_time.label }}</th>
                <td>{{ canopy_cover_form.date_time }}</td>
                <td>{{ canopy_cover_form.date_time.errors }}</td>
            </tr>
            <tr>
                <th align='left'>{{ canopy_cover_form.site.label }}</th>
                <td>{{ canopy_cover_form.site }}</td>
                <td>{{ canopy_cover_form.site.errors }}</td>
            </tr>
            <tr>
                <th align='left'>{{ canopy_cover_form.weather.label }}</th>
                <td>{{ canopy_cover_form.weather }}</td>
                <td>{{ canopy_cover_form.weather.errors }}</td>
            </tr>

            {{ cardinal_formset.management_form }}
            <table> <!-- cardinal boxes subtable -->
                <!-- PLACEHOLDER FOR NOW -->
                <tr>
                    <th>{{ 'direction'|get_cardinal_labels }}</th>
                    <th>{{ 'box'|get_cardinal_labels }}</th>
                </tr>
            {% for cardinal_form in cardinal_formset %}
                <tr>
                    <th></th>
                    <td>{{ cardinal_form.direction.errors }}</td>
                </tr>
                <tr>
                    <td>{{ cardinal_form.direction }}</td>
                    <td>{{ cardinal_form.A }}</td>
                    <td>{{ cardinal_form.B }}</td>
                    <td>{{ cardinal_form.C }}</td>
                    <td>{{ cardinal_form.D }}</td>
                    <td>{{ cardinal_form.E }}</td>
                    <td>{{ cardinal_form.F }}</td>
                    <td>{{ cardinal_form.G }}</td>
                    <td>{{ cardinal_form.H }}</td>
                    <td>{{ cardinal_form.I }}</td>
                    <td>{{ cardinal_form.J }}</td>
                    <td>{{ cardinal_form.K }}</td>
                    <td>{{ cardinal_form.L }}</td>
                    <td>{{ cardinal_form.M }}</td>
                    <td>{{ cardinal_form.N }}</td>
                    <td>{{ cardinal_form.O }}</td>
                    <td>{{ cardinal_form.P }}</td>
                    <td>{{ cardinal_form.Q }}</td>
                    <td>{{ cardinal_form.R }}</td>
                    <td>{{ cardinal_form.S }}</td>
                    <td>{{ cardinal_form.T }}</td>
                    <td>{{ cardinal_form.U }}</td>
                    <td>{{ cardinal_form.V }}</td>
                    <td>{{ cardinal_form.W }}</td>
                    <td>{{ cardinal_form.X }}</td>
                    <td>{{ cardinal_form.num_shaded }}</td>
                </tr>
            {% endfor %}
            </table> <!-- end cardinals -->

        </table> <!-- end canopy cover -->

    <input type='submit', name='submit', value='Submit' />
    </form>

{% else %}
    <p>{% trans "You must be logged in to submit data." %}</p>
    <a href='/streamwebs/login/'>{% trans "Log in here." %}</a>
{% endif %}

{% endblock %}
