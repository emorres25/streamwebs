{% extends 'streamwebs/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% load filters %}
{% block title %}{% trans "Canopy Cover Survey" %}{% endblock %}
{% block body_title %}{% trans "Canopy Cover Survey" %}{% endblock %}
{% block content %}

    {% if user.is_authenticated %}
        {% if added %}
            <strong> trans "You have successfully submitted your Canopy Cover Survey." </strong>

        {% else %}
            <form id='canopy_cover_form' method='post'>
                {% csrf_token %}
                <table> <!-- main cc info table -->
                    <tr>{{ canopy_cover_form.non_field_errors }}</tr>
                    <tr>
                        <th align='left'>{{ canopy_cover_form.school.label }}</th>
                        <td>{{ canopy_cover_form.school }}</td>
                        <td>{{ canopy_cover_form.school.errors }}</td>
                    </tr>
                    <tr>
                        <th align='left'>{{ canopy_cover_form.date_time.label }}</th>
                        <td>{{ canopy_cover_form.date_time }}</td>
                        <td>{{ canopy_cover_form.date_time.errors }}</td>
                    </tr>
                    <tr>
                        <th align='left'>{{ canopy_cover_form.site.label }}</th>
                        <td>{{ canopy_cover_form.site }}</td>
                        <td>{{ canopy_cover_form.site.errors }}</td>
                    </tr>
                    <tr>
                        <th align='left'>{{ canopy_cover_form.weather.label }}</th>
                        <td>{{ canopy_cover_form.weather }}</td>
                        <td>{{ canopy_cover_form.weather.errors }}</td>
                    </tr>

                    {{ cardinal_formset.management_form }}
                    <table> <!-- cardinal boxes subtable -->
                        <!-- PLACEHOLDER FOR NOW -->
                        <th></th>
                        <tr>
                            <th>{{ 'direction'|get_cardinal_labels }}</th>
                            <th>{{ 'box'|get_cardinal_labels }}</th>
                        </tr>
                    {% for cardinal_form in cardinal_formset %}
                        <tr>
                            <th></th>
                            <td>{{ cardinal_form.direction.errors }}</td>
                        </tr>
                    {% endfor %}
                    </table> <!-- end cardinals -->

                </table> <!-- end canopy cover -->

            <input type='submit', name='submit', value='Submit' />
            </form>
        {% endif %}

    {% else %}
        <p>{% trans "You must be logged in to submit data." %}</p>
        <a href='/streamwebs/login/'>{% trans "Log in here." %}</a>
    {% endif %}

{% endblock %}
