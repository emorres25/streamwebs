{% load staticfiles %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>{% block title %}Streamwebs{% endblock %}</title>
  <link rel="stylesheet" type="text/css"
        href="{% static 'streamwebs/bower_components/materialize/dist/css/materialize.css' %}"/>
  <link href="http://fonts.googleapis.com/icon?family=Material+Icons"
        rel="stylesheet">
  <link rel="stylesheet" type="text/css"
        href="{% static 'streamwebs/style.css' %}"/>
  <link rel="shortcut icon"
        href="{% static 'streamwebs/images/favicon.ico' %}"/>
  {% block head %}{% endblock %}
</head>

<body>
  <div class="page-wrap">
    <div class="header">
      <a href="/" class="logo">
        <img
            src="{% static 'streamwebs/images/logo.png' %}"
            alt="Home">
      </a>
    </div>

    <div class="header-img">
    </div>

    <div class="inner-wrap grey lighten-5">
      <form id="langform" action="/i18n/setlang/" method="post">
          {% csrf_token %}
          <input name="next" type="hidden" value="{{ request.path }}" />
          <input id="lang_input" name="language" type="hidden" />
          <ul id="languages" class="dropdown-content">
              {% for lang in LANGUAGES %}
                  <li><a href="#!" onclick="submitLang('{{ lang.0 }}');">{{ lang.1 }}</a></li>
              {% endfor %}
          </ul>
      </form>
      <nav id="navbar">
        <div id="nav-container">
          {% include "streamwebs/navigation.html" %}
        </div>
      </nav>

      <a href="#!" id="language-button" class="btn dropdown-button teal darken-4"
         data-activates="languages">
        <ul class="left">
          <li>
            {% for lang in LANGUAGES %}
              {% if lang.0 == LANGUAGE_CODE %}
                {{ lang.1 }}
              {% endif %}
            {% endfor %}
            <i class="material-icons right">arrow_drop_down</i>
          </li>
        </ul>
      </a>

      <div class="content">
        <h3 class="brand-logo center teal-text text-darken-4">
          {% block body_title %}{% endblock %}</h3>
        {% block content %}{% endblock %}
      </div>
    </div>
  </div>

<script
    src="{% static 'streamwebs/bower_components/jquery/dist/jquery.js' %}"></script>
<script src="{% static 'streamwebs/bower_components/d3/d3.js' %}"></script>
<script
    src="{% static 'streamwebs/bower_components/materialize/dist/js/materialize.js' %}"></script>
{% block scripts %}{% endblock %}

<script>
  // Language submission
  function submitLang(language) {
    $('#lang_input').val(language);
    $('#langform').submit();
  }

  var floatNav = function floatNav() {
    console.log($(window).scrollTop());
    console.log($('div.header').height());
    if($(window).scrollTop() > $('div.header').height()) {
      $('div.nav-container').addClass('nav-float');
    } else {
      $('div.nav-container').removeClass('nav-float');
    }
  }

  $(window).scroll(function() {
    floatNav();
  });

  $('html, body').scroll(function() {
    floatNav();
  })
</script>
</body>
</html>
